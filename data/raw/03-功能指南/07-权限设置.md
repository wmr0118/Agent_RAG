# 权限设置与管理

## 权限模型

智服云采用RBAC（基于角色的访问控制）权限模型。权限分配遵循"用户-角色-权限"三层结构，管理员通过分配角色来控制用户权限，而不是直接分配权限。

## 预定义角色

### 管理员角色

拥有所有系统权限，包括：

- 用户管理：创建、编辑、删除用户
- 系统配置：修改系统设置、配置渠道接入
- 数据管理：导出数据、备份恢复
- API管理：创建和管理API密钥
- 账单管理：查看账单、升级套餐

### 编辑者角色

可以执行日常操作，但不能修改系统设置：

- 内容编辑：编辑知识库、创建工单
- 对话管理：查看和回复用户对话
- 报表查看：查看各类统计报表
- 知识库管理：添加、编辑、删除知识条目

### 查看者角色

只读权限，适合需要查看数据但不需要修改的用户：

- 查看对话记录
- 查看工单列表
- 查看报表数据
- 查看知识库内容

## 自定义角色

企业版支持创建自定义角色：

1. 进入"角色管理"页面
2. 点击"新建角色"
3. 输入角色名称和描述
4. 选择需要的权限项
5. 保存角色

权限项包括：

- 用户管理权限
- 内容编辑权限
- 数据查看权限
- 系统配置权限
- API访问权限

## 权限分配

### 单个用户分配

在用户详情页面的"权限"标签中，可以：

1. 选择用户角色（单选或多选）
2. 查看权限预览
3. 保存修改

用户可以同时拥有多个角色，权限取并集。

### 批量分配

在用户列表中选中多个用户，可以批量分配角色。操作会立即生效。

## 权限验证

系统在以下场景会验证用户权限：

- 访问页面时检查页面访问权限
- 执行操作时检查操作权限
- API调用时验证API密钥权限

如果权限不足，系统会提示"无权限访问"或"操作被拒绝"。

## 权限继承

### 组织架构继承

如果启用了组织架构功能，子部门的用户会继承父部门的权限。例如：

- 销售部门有"客户数据查看"权限
- 销售一部继承销售部门的权限
- 销售一部的用户自动拥有"客户数据查看"权限

### 角色权限继承

自定义角色可以基于现有角色创建，自动继承基础角色的权限，然后添加额外权限。

## 权限审计

系统记录所有权限变更操作：

- 角色创建和修改
- 用户角色分配
- 权限使用记录

管理员可以在"审计日志"中查看权限相关操作。

## 最佳实践

1. **最小权限原则**：只给用户分配必要的权限
2. **定期审查**：定期检查用户权限，及时回收不需要的权限
3. **角色命名**：使用清晰的角色名称，如"客服主管"、"数据分析师"
4. **权限分离**：敏感操作（如删除数据）需要单独权限，不能通过角色继承获得

